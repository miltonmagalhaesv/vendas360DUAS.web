{
  "gitSyncId": "68750378005e0954974296b0_56c1360b-eb29-4c3b-b2f8-f8240238a36e",
  "id": "Analise PDV_getFaturamentoPV",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT\n  EXTRACT(YEAR FROM data_lanca)                   AS ano,\n  ponto_venda,\n  date_trunc('month', data_lanca)::date           AS mes_data,\n  TO_CHAR(date_trunc('month', data_lanca), 'Mon') AS mes_nome,\n  ROUND(SUM(\n    CASE\n      WHEN oper ILIKE '%Devol%' THEN -ABS(valor_liquido)   -- devolução negativa\n      ELSE  ABS(valor_liquido)                              -- vendas/ajustes positivos\n    END\n  )::numeric, 2) AS valor_faturado\nFROM public.vw_resumo_vend_devo\nWHERE EXTRACT(YEAR FROM data_lanca) IN (\n  {{ Number(selAno.selectedOptionValue) }},\n  {{ Number(selAno.selectedOptionValue) - 1 }}\n)\nGROUP BY 1,2,3,4\nORDER BY mes_data, ponto_venda, ano;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "BD DUAS",
      "isAutoGenerated": false,
      "name": "BD DUAS",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "getFaturamentoPV",
    "pageId": "Analise PDV",
    "runBehaviour": "AUTOMATIC",
    "userSetOnLoad": false
  }
}