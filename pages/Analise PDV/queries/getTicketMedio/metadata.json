{
  "gitSyncId": "68750378005e0954974296b0_cf62e14f-b150-44b8-9dc9-e3864d38c002",
  "id": "Analise PDV_getTicketMedio",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT\n  date_trunc('month', data_lanca)::date AS mes_data,\n  TO_CHAR(date_trunc('month', data_lanca), 'Mon') AS mes_nome,\n  ROUND(\n    SUM(CASE WHEN oper = 'S - Venda' THEN valor_liquido ELSE 0 END)::numeric\n    /\n    NULLIF(COUNT(DISTINCT CASE WHEN oper = 'S - Venda' THEN id_venda END), 0)\n  , 2) AS ticket_medio\nFROM public.vw_resumo_vend_devo\nWHERE EXTRACT(YEAR FROM data_lanca) = {{ Number(selAno.selectedOptionValue) }}\n  AND oper = 'S - Venda'\nGROUP BY 1, 2\nORDER BY mes_data;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "BD DUAS",
      "isAutoGenerated": false,
      "name": "BD DUAS",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "getTicketMedio",
    "pageId": "Analise PDV",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}