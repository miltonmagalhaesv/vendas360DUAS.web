{
  "gitSyncId": "68750378005e0954974296b0_c0aefc0f-85df-4e04-95db-eaa18f283ea2",
  "id": "CRM - Dash_get_campanhas_ativas_detalhes",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT \n        c.id_campanha,\n        c.nome_campanha,\n        c.data_inicio,\n        c.data_fim,\n        c.status_campanha,\n        COUNT(cc.id_contato_campanha) as total_clientes_selecionados,\n        COUNT(CASE WHEN cc.status_envio NOT IN ('Não Iniciado') THEN 1 END) as mensagens_enviadas,\n        COUNT(CASE WHEN cc.status_envio IN ('Respondido', 'Concluído') THEN 1 END) as respostas_recebidas,\n        COUNT(CASE WHEN cc.resultado_interacao = 'Venda Realizada' THEN 1 END) as vendas_realizadas,\n        COALESCE(SUM(cc.valor_venda_gerada), 0) as valor_total_vendas\n    FROM crm.campanhas c\n    LEFT JOIN crm.contatos_campanha cc ON c.id_campanha = cc.id_campanha\n    WHERE c.status_campanha = 'Ativa'\n    GROUP BY c.id_campanha, c.nome_campanha, c.data_inicio, c.data_fim, c.status_campanha\n    ORDER BY c.data_criacao DESC;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "BD DUAS",
      "isAutoGenerated": false,
      "name": "BD DUAS",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [],
    "executeOnLoad": true,
    "name": "get_campanhas_ativas_detalhes",
    "pageId": "CRM - Dash",
    "userSetOnLoad": false
  }
}